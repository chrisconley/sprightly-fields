<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" >
<head>
    <title>My Foo Tests</title>    
    <script language="javascript" src="../jquery-1.3.2.min.js" type="text/javascript"></script>
    <script language="javascript" src="../jquery.form.js" type="text/javascript"></script>
    <script language="javascript" src="../jquery.sprightly_fields.js" type="text/javascript"></script>
    <script language="javascript" src="testrunner.js" type="text/javascript"></script>
    <link media="screen" href="testsuite.css" type="text/css" rel="stylesheet"/>    
</head>
<body>

<script language="javascript" type="text/javascript">

jQuery(document).ready(function ($) {
	var schoolLevelSelectors = {
		"High School": '.high_school',
		"College": '.college'};
		
	$('[name=enrollment[SCHOOL_LEVEL]]').sprightlyFields(schoolLevelSelectors).change( function () {
	});
	$('[name=enrollment[SCHOOL_LEVEL]]')[1].checked = false;
});

$(document).ready(function(){
    
    module("Show and Hide");

    test("should hide the element when hide is called", function(){
        
        console.log($('[name=enrollment[SCHOOL_LEVEL]]').fieldValue()[0]);
        //$('[name=enrollment[SCHOOL_LEVEL]]')[0].checked = true;
        console.log($('[name=enrollment[SCHOOL_LEVEL]]').fieldValue()[0]);

        // actual, expected
        ok($("#enrollment_gpa2").is(':hidden'), "The element should be hidden");
        equals($("#enrollment_gpa").is(':visible'), true, "The element should be hidden");
    });
    
    module("module2", {
      setup: function() {
        $('[name=enrollment[SCHOOL_LEVEL]]')[0].checked = true;
        $('[name=enrollment[SCHOOL_LEVEL]]').trigger('change');
        console.log("in setup");
      },
      teardown: function() {
        $('[name=enrollment[SCHOOL_LEVEL]]')[0].checked = false;
      }
    });
    
    test("should hide the element when hide is called", function(){
        
          //console.log($('[name=enrollment[SCHOOL_LEVEL]]').fieldValue()[0]);
          console.log("in test");

        // actual, expected
        ok($("#enrollment_gpa2").is(':hidden'), "The element should be hidden");
        equals($("#enrollment_gpa2:visible").length, 0, 'bla');
        equals($("#enrollment_gpa").is(':visible'), true, "The element should be hidden");
        equals($("#enrollment_gpa:visible").length, 1, 'bla');
    });
});

</script>

        <h1>My Foo Tests</h1>
        <h2 id="banner"></h2>
        <ol id="tests"></ol>
        <div id="results"></div>
        <div id="main"></div>        
        
        <!-- Any HTML you may require for your tests to work properly -->
        <div id="testDiv"></div>
        
<form action="/orgs/00D70000000IqxMEAS/contacts/30/student_applications/4/enrollments" id="enrollmentForm" method="post">
	<dl>
	  <dt><label for="enrollment_SCHOOL_LEVEL">School Level:</label></dt>
		<input id="enrollment_SCHOOL_LEVEL_high_school" name="enrollment[SCHOOL_LEVEL]" type="radio" value="High School" /> 
		  <label for="enrollment_SCHOOL_LEVEL_high_school">High School</label>
		<input id="enrollment_SCHOOL_LEVEL_college" name="enrollment[SCHOOL_LEVEL]" type="radio" value="College" /> 
		  <label for="enrollment_SCHOOL_LEVEL_college">College</label>
  </dl>

  <dl class="high_school college ged">
  	<dt><label for="enrollment_enrollment_type">Type:</label></dt>
  	<input id="enrollment_enrollment_type_public" name="enrollment[enrollment_type]" type="radio" value="Public" />
  	  <label for="enrollment_enrollment_type_public">Public</label>
  	<input id="enrollment_enrollment_type_private" name="enrollment[enrollment_type]" type="radio" value="Private" />
  	  <label for="enrollment_enrollment_type_private">Private</label>
  	<span class="high_school ged">
  	  <input id="enrollment_enrollment_type_parochial" name="enrollment[enrollment_type]" type="radio" value="Parochial" /> 
  	    <label for="enrollment_enrollment_type_parochial">Parochial</label>
  	</span>
  	<span class="high_school ged">
  	  <input id="enrollment_enrollment_type_home_schooled" name="enrollment[enrollment_type]" type="radio" value="Home Schooled" />
  	    <label for="enrollment_enrollment_type_home_schooled">Home Schooled</label>
  	</span>
  	<span class="high_school ged">
  	  <input id="enrollment_enrollment_type_ged" name="enrollment[enrollment_type]" type="radio" value="GED" />
  	    <label for="enrollment_enrollment_type_ged">GED</label>
  	</span>
  </dl>
  
  <dl class="high_school">
    <dt><label for="enrollment_gpa">High School Text Field:</label></dt>
    <dd><input class="textbox" id="enrollment_gpa" name="enrollment[gpa]" size="10" type="text" /></dd>
  </dl>
  
  <dl class="college">
    <dt><label for="enrollment_gpa">College Text Field:</label></dt>
    <dd><input class="textbox" id="enrollment_gpa2" name="enrollment[gpa]" size="10" type="text" /></dd>
  </dl>
        
</body>
</html>